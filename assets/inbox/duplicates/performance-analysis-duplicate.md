The following function is causing performance issues in our application:
[Paste your function]

Please suggest ways to optimize this function, considering:
1. Time complexity improvements
2. Memory usage optimization
3. Potential for caching or memoization
4. Opportunities for parallel processing, if applicable

For each suggestion, provide a brief explanation of the expected performance gain and any potential trade-offs.